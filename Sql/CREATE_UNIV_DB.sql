CREATE DATABASE UNIVERSITY;
USE UNIVERSITY;

DROP TABLE IF EXISTS STUDENTS;
CREATE TABLE IF NOT EXISTS STUDENTS(
		SID INT PRIMARY KEY AUTO_INCREMENT,
        SNAME VARCHAR(30),
        ADDRESS CHAR(20),
        FEE INT,
        DEPARTMENT INT,
        FOREIGN KEY(DEPARTMENT) REFERENCES DEPARTMENTS(DEPARTMENT_ID)
);

DROP TABLE IF EXISTS EMPLOYEES;
CREATE TABLE IF NOT EXISTS EMPLOYEES(
		EID INT PRIMARY KEY,
        ENAME VARCHAR(30),
        ADDRESS CHAR(20),
        SALARY INT,
        DEPARTMENT INT,
        SUBJECTS INT,
        FOREIGN KEY(DEPARTMENT) REFERENCES DEPARTMENTS(DEPARTMENT_ID),
        FOREIGN KEY(SUBJECTS) REFERENCES SUBJECTS(SUBJECT_ID)
);

CREATE TABLE IF NOT EXISTS DEPARTMENTS(
		DEPARTMENT_ID INT PRIMARY KEY,
        DEPARTMENT_NAME CHAR(10)
);

CREATE TABLE IF NOT EXISTS SUBJECTS(
		SUBJECT_ID INT PRIMARY KEY,
        SUBJECT_NAME CHAR(20)
);


CREATE TABLE IF NOT EXISTS FEE_TRANSACTIONS(
		TRANSACTION_ID INT PRIMARY KEY,
        SID INT,
        EID INT,
        TRANSACTION_AMOUNT INT,
        FOREIGN KEY(SID) REFERENCES STUDENTS(SID),
		FOREIGN KEY(EID) REFERENCES EMPLOYEES(EID)
);

CREATE TABLE IF NOT EXISTS SALARY_TRANSACTIONS(
		TRANSACTION_ID INT PRIMARY KEY,
        EMPID INT,
        TRANSACTION_AMOUNT INT,
        STATUS CHAR(20),
        FOREIGN KEY(EMPID) REFERENCES EMPLOYEES(EID)
);

INSERT INTO DEPARTMENTS (DEPARTMENT_ID, DEPARTMENT_NAME) VALUES
(1, 'Science'),
(2, 'Maths'),
(3, 'English'),
(4, 'Admin');

INSERT INTO SUBJECTS (SUBJECT_ID, SUBJECT_NAME) VALUES
(101, 'Physics'),
(102, 'Algebra'),
(103, 'Literature'),
(104, 'Chemistry');

INSERT INTO EMPLOYEES (EID, ENAME, ADDRESS, SALARY, DEPARTMENT, SUBJECTS) VALUES
(201, 'Dr. Rao', 'Hyderabad', 75000, 1, 101),
(202, 'Mrs. Sharma', 'Vijayawada', 68000, 2, 102),
(203, 'Mr. Verma', 'Guntur', 70000, 3, 103),
(204, 'Ms. Iyer', 'Vizag', 80000, 1, 104),
(205, 'Mr. Das', 'Nellore', 60000, 4, 102);

INSERT INTO STUDENTS (SNAME, ADDRESS, FEE, DEPARTMENT) VALUES
('Abhinav Reddy', 'Hyderabad', 40000, 1),
('Sneha Kumari', 'Vijayawada', 42000, 2),
('Rahul Das', 'Guntur', 39000, 3),
('Lavanya Iyer', 'Vizag', 45000, 1),
('Sai Kiran', 'Nellore', 40000, 4); 

INSERT INTO FEE_TRANSACTIONS (TRANSACTION_ID, SID, EID, TRANSACTION_AMOUNT) VALUES
(1, 1, 201, 40000),
(2, 2, 202, 42000),
(3, 3, 203, 39000),
(4, 4, 204, 45000),
(5, 5, 205, 40000);

INSERT INTO SALARY_TRANSACTIONS (TRANSACTION_ID, EMPID, TRANSACTION_AMOUNT, STATUS) VALUES
(1001, 201, 75000, 'Completed'),
(1002, 202, 68000, 'Completed'),
(1003, 203, 70000, 'Pending'),
(1004, 204, 80000, 'Completed'),
(1005, 205, 60000, 'Pending');

USE UNIVERSITY;
SELECT * FROM STUDENTS
WHERE ADDRESS LIKE 'V%';

SELECT * FROM STUDENTS
WHERE ADDRESS LIKE '%A%';

SELECT * FROM STUDENTS
WHERE ADDRESS LIKE '__________';

select count(salary) as count from employees;